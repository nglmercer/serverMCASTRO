---
import Layout from '../layouts/Layout.astro';
import StepForm from '@components/newserver/StepForm.astro'
import Step1 from '@components/newserver/steps/Step1.astro';
import Step2 from '@components/newserver/steps/Step2.astro';
import Step3 from '@components/newserver/steps/Step3.astro';
const steps = [
  { name: "Nombre del servidor", value: "server-name" },
  { name: "Seleccionar núcleo del servidor", value: "server-core" },
  { name: "Configuración Final", value: "final-config" }
];
---
<Layout>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="/materialSymbols.css"/>
<link rel="stylesheet" href="/src/components/newserver/steps/step.css">
<script src="/src/components/newserver/newserver.js"></script>
<task-notifications id="notificaciones"></task-notifications>
<StepForm steps={steps} title="Crear un nuevo Servidor de Minecraft">
    <Step1 />
    <Step2 />
    <Step3 />
  </StepForm>
</Layout>
<script>
import type { CInput } from "src/litcomponents/CInput";
const formelements = [
  "server_name_input",
  "window.selecttab",
  "coreselection",
  "coreversions",
  "filecoreupload"
]
const formdata:any = {
  
}
formelements.forEach((el)=>{
  const element = document.getElementById(el) as CInput;
  if (!element) return;
  element.addEventListener('change',(e)=>{
    const data = (e as CustomEvent).detail;
    console.log(data)
    formdata[el] = data.value
  })
})
  document.addEventListener('formSubmit',async function(e) {
      console.log(formdata)
  })  
</script>